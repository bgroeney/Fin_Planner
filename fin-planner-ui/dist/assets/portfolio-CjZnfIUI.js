import{L as l,s as i}from"./index-oVbs5Hxd.js";const f=l("portfolio",{state:()=>({portfolios:[],currentPortfolioId:localStorage.getItem("currentPortfolioId")||null,loading:!1,showPortfolioModal:!1}),getters:{currentPortfolio:o=>!o.currentPortfolioId&&o.portfolios.length>0?o.portfolios[0]:o.portfolios.find(r=>r.id===o.currentPortfolioId)||o.portfolios[0]||null,currentPortfolioValue(){return this.currentPortfolio?.totalValue||0},needsPortfolioSelection:o=>o.portfolios.length===0?!1:o.currentPortfolioId?!o.portfolios.some(r=>r.id===o.currentPortfolioId):!0},actions:{async fetchPortfolios(){this.loading=!0;try{const o=await i.get("/portfolios");this.portfolios=o.data,this.portfolios.length>0&&(this.portfolios.some(t=>t.id===this.currentPortfolioId)||this.setCurrentPortfolio(this.portfolios[0].id))}catch(o){console.error("Failed to fetch portfolios",o)}finally{this.loading=!1}},setCurrentPortfolio(o){this.currentPortfolioId=o,localStorage.setItem("currentPortfolioId",o)},openPortfolioModal(){this.showPortfolioModal=!0},closePortfolioModal(){this.showPortfolioModal=!1}}});export{f as usePortfolioStore};
