import{_ as B,k as I,c as d,o as l,a as e,e as L,f as H,t as o,n as P,b as U,F as R,r as b,g as O,q as E,d as C,C as ee,m as M,x as $,z as F,y as G,A as te,B as N,i as ae,v as W,w as se}from"./index-D2Wtd9Sa.js";import{M as oe}from"./MoneyBoxLoader-CzLxqCX3.js";import{P as ne}from"./PropertyRiskAnalyzer-DIAH-Cki.js";const le={class:"yield-gauge"},re={class:"gauge-container"},ie={class:"gauge-metrics"},de={class:"metric"},ue={class:"metric-value value-positive"},ve={class:"metric"},ce={class:"metric-value value-negative"},pe={class:"metric"},me={__name:"YieldGauge",props:{yieldPercent:{type:Number,default:0},targetYield:{type:Number,default:6},grossIncome:{type:Number,default:0},expenses:{type:Number,default:0}},setup(w){const m=w,u=I(()=>m.grossIncome-m.expenses),h=I(()=>[Math.min(m.yieldPercent,12)]),_=I(()=>{const x=m.yieldPercent>=m.targetYield?"#059669":m.yieldPercent>=4?"#d97706":"#dc2626";return{chart:{type:"radialBar",sparkline:{enabled:!1},fontFamily:"Plus Jakarta Sans, Inter, sans-serif"},plotOptions:{radialBar:{startAngle:-135,endAngle:135,hollow:{size:"65%",background:"transparent"},track:{background:"var(--color-border)",strokeWidth:"100%",margin:0},dataLabels:{name:{show:!0,fontSize:"14px",fontWeight:500,color:"var(--color-text-muted)",offsetY:-15},value:{show:!0,fontSize:"32px",fontWeight:700,color:x,offsetY:5,formatter:()=>`${m.yieldPercent.toFixed(1)}%`}}}},labels:["Net Yield"],colors:[x],stroke:{lineCap:"round"},annotations:{position:"front",yaxis:[{y:m.targetYield,borderColor:"#94a3b8",strokeDashArray:4,label:{text:`Target: ${m.targetYield}%`,style:{color:"var(--color-text-muted)",fontSize:"12px"}}}]}}});function g(x){return new Intl.NumberFormat("en-AU",{style:"currency",currency:"AUD",minimumFractionDigits:0,maximumFractionDigits:0}).format(x||0)}return(x,n)=>{const i=H("apexchart");return l(),d("div",le,[e("div",re,[L(i,{type:"radialBar",height:"280",options:_.value,series:h.value},null,8,["options","series"])]),e("div",ie,[e("div",de,[n[0]||(n[0]=e("span",{class:"metric-label"},"Gross Income",-1)),e("span",ue,o(g(w.grossIncome)),1)]),n[3]||(n[3]=e("div",{class:"metric-divider"},null,-1)),e("div",ve,[n[1]||(n[1]=e("span",{class:"metric-label"},"Expenses",-1)),e("span",ce,"-"+o(g(w.expenses)),1)]),n[4]||(n[4]=e("div",{class:"metric-divider"},null,-1)),e("div",pe,[n[2]||(n[2]=e("span",{class:"metric-label"},"Net Income",-1)),e("span",{class:P(["metric-value",u.value>=0?"value-positive":"value-negative"])},o(g(u.value)),3)])])])}}},ye=B(me,[["__scopeId","data-v-32055756"]]),ge={class:"vacancy-heatmap"},fe={key:0,class:"empty-state"},be={__name:"VacancyHeatmap",props:{data:{type:Array,default:()=>[]}},setup(w){const m=w,u=I(()=>{const n={};return m.data.forEach(i=>{const v=new Date(i.month).toISOString().slice(0,7);n[v]||(n[v]={month:new Date(i.month),total:0,tenants:[]}),n[v].total+=i.expiringRent,n[v].tenants.push(i.tenantName)}),Object.values(n).sort((i,v)=>i.month-v.month)}),h=I(()=>[{name:"Expiring Rent",data:u.value.map(n=>({x:g(n.month),y:n.total,tenants:n.tenants}))}]),_=I(()=>{const n=new Date;return{chart:{type:"bar",toolbar:{show:!1},fontFamily:"Plus Jakarta Sans, Inter, sans-serif"},plotOptions:{bar:{borderRadius:4,columnWidth:"70%",distributed:!0}},dataLabels:{enabled:!1},xaxis:{type:"category",labels:{style:{colors:"var(--color-text-muted)",fontSize:"11px"},rotate:-45,rotateAlways:!0},axisBorder:{show:!1},axisTicks:{show:!1}},yaxis:{labels:{style:{colors:"var(--color-text-muted)",fontSize:"12px"},formatter:i=>`$${(i/1e3).toFixed(0)}k`}},colors:u.value.map(i=>{const v=x(n,i.month);return v<=6?"#dc2626":v<=12?"#d97706":"#059669"}),legend:{show:!1},tooltip:{custom:function({series:i,seriesIndex:v,dataPointIndex:k,w:D}){const r=D.config.series[0].data[k];return`
          <div style="padding: 12px; font-family: inherit;">
            <div style="font-weight: 600; margin-bottom: 8px;">${r.x}</div>
            <div style="color: var(--color-text-secondary); margin-bottom: 4px;">
              Expiring: $${r.y.toLocaleString()}
            </div>
            <div style="font-size: 12px; color: var(--color-text-muted);">
              ${r.tenants.join(", ")}
            </div>
          </div>
        `}},grid:{borderColor:"var(--color-border-subtle)",strokeDashArray:4,xaxis:{lines:{show:!1}}}}});function g(n){return new Date(n).toLocaleDateString("en-AU",{month:"short",year:"2-digit"})}function x(n,i){const v=new Date(n),k=new Date(i);return(k.getFullYear()-v.getFullYear())*12+(k.getMonth()-v.getMonth())}return(n,i)=>{const v=H("apexchart");return l(),d("div",ge,[w.data.length===0?(l(),d("div",fe,[...i[0]||(i[0]=[U('<svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" data-v-1e7813bf><rect x="3" y="4" width="18" height="18" rx="2" ry="2" data-v-1e7813bf></rect><line x1="16" y1="2" x2="16" y2="6" data-v-1e7813bf></line><line x1="8" y1="2" x2="8" y2="6" data-v-1e7813bf></line><line x1="3" y1="10" x2="21" y2="10" data-v-1e7813bf></line></svg><p data-v-1e7813bf>No lease expirations in the next 24 months</p>',2)])])):(l(),d(R,{key:1},[L(v,{type:"bar",height:"220",options:_.value,series:h.value},null,8,["options","series"]),i[1]||(i[1]=U('<div class="legend" data-v-1e7813bf><div class="legend-item" data-v-1e7813bf><span class="legend-color legend-danger" data-v-1e7813bf></span><span data-v-1e7813bf>Expiring &lt; 6mo</span></div><div class="legend-item" data-v-1e7813bf><span class="legend-color legend-warning" data-v-1e7813bf></span><span data-v-1e7813bf>Expiring 6-12mo</span></div><div class="legend-item" data-v-1e7813bf><span class="legend-color legend-safe" data-v-1e7813bf></span><span data-v-1e7813bf>Expiring &gt; 12mo</span></div></div>',1))],64))])}}},he=B(be,[["__scopeId","data-v-1e7813bf"]]),we={class:"cashflow-forecast"},xe={class:"view-toggle"},ke={key:0,class:"empty-state"},$e={class:"summary-row"},_e={class:"summary-item"},Ce={class:"summary-value value-positive"},Pe={class:"summary-item"},Ie={key:2,class:"table-container"},Ae={class:"cashflow-table"},De=["onClick"],Fe={class:"col-period"},Se={class:"expand-btn"},Re={width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},Ve={key:0,points:"6 15 12 9 18 15"},Le={key:1,points:"6 9 12 15 18 9"},Ee={class:"year-label"},Te={class:"col-value text-right value-positive"},Me={class:"col-value text-right value-negative"},Ne={class:"col-period month-label"},Ue={class:"col-value text-right"},Be={class:"col-value text-right"},Ye={__name:"CashflowForecast",props:{data:{type:Array,default:()=>[]}},setup(w){const m=w,u=b("chart"),h=b(new Set),_=I(()=>{const r={};for(const p of m.data){const S=new Date(p.month),y=S.getMonth()>=6?S.getFullYear()+1:S.getFullYear();r[y]||(r[y]={months:[],totalIncome:0,totalExpenses:0,totalNet:0}),r[y].months.push({...p,month:S}),r[y].totalIncome+=p.projectedIncome,r[y].totalExpenses+=p.projectedExpenses,r[y].totalNet+=p.netCashflow}for(const p in r)r[p].months.sort((S,y)=>S.month-y.month);return r}),g=I(()=>[{name:"Income",data:m.data.map(r=>({x:new Date(r.month).getTime(),y:r.projectedIncome}))},{name:"Expenses",data:m.data.map(r=>({x:new Date(r.month).getTime(),y:r.projectedExpenses}))},{name:"Net Cashflow",data:m.data.map(r=>({x:new Date(r.month).getTime(),y:r.netCashflow}))}]),x=I(()=>m.data.length===0?0:m.data.reduce((r,p)=>r+p.projectedIncome,0)/m.data.length),n=I(()=>m.data.length===0?0:m.data.reduce((r,p)=>r+p.netCashflow,0)/m.data.length),i=I(()=>({chart:{type:"area",toolbar:{show:!1},fontFamily:"Plus Jakarta Sans, Inter, sans-serif",stacked:!1,zoom:{enabled:!1}},colors:["#059669","#dc2626","#1e40af"],fill:{type:"gradient",gradient:{shadeIntensity:1,opacityFrom:.4,opacityTo:.1,stops:[0,90,100]}},stroke:{curve:"smooth",width:[2,2,3]},dataLabels:{enabled:!1},xaxis:{type:"datetime",labels:{style:{colors:"var(--color-text-muted)",fontSize:"11px"},format:"MMM yy"},axisBorder:{show:!1},axisTicks:{show:!1}},yaxis:{labels:{style:{colors:"var(--color-text-muted)",fontSize:"12px"},formatter:r=>`$${(r/1e3).toFixed(0)}k`}},legend:{position:"top",horizontalAlign:"right",fontSize:"12px",labels:{colors:"var(--color-text-secondary)"},markers:{width:10,height:10,radius:2}},tooltip:{x:{format:"MMM yyyy"},y:{formatter:r=>`$${r.toLocaleString()}`}},grid:{borderColor:"var(--color-border-subtle)",strokeDashArray:4,xaxis:{lines:{show:!1}}}}));function v(r){h.value.has(r)?h.value.delete(r):h.value.add(r),h.value=new Set(h.value)}function k(r){return new Intl.NumberFormat("en-AU",{style:"currency",currency:"AUD",minimumFractionDigits:0,maximumFractionDigits:0}).format(r||0)}function D(r){return r.toLocaleDateString("en-AU",{month:"short",year:"numeric"})}return(r,p)=>{const S=H("apexchart");return l(),d("div",we,[e("div",xe,[e("button",{class:P(["toggle-btn",{active:u.value==="chart"}]),onClick:p[0]||(p[0]=y=>u.value="chart")},[...p[2]||(p[2]=[e("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("polyline",{points:"22 12 18 12 15 21 9 3 6 12 2 12"})],-1),O(" Chart ",-1)])],2),e("button",{class:P(["toggle-btn",{active:u.value==="table"}]),onClick:p[1]||(p[1]=y=>u.value="table")},[...p[3]||(p[3]=[e("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),e("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),e("line",{x1:"3",y1:"18",x2:"21",y2:"18"})],-1),O(" Monthly ",-1)])],2)]),w.data.length===0?(l(),d("div",ke,[...p[4]||(p[4]=[e("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5"},[e("polyline",{points:"22 12 18 12 15 21 9 3 6 12 2 12"})],-1),e("p",null,"No cashflow data available",-1)])])):u.value==="chart"?(l(),d(R,{key:1},[L(S,{type:"area",height:"220",options:i.value,series:g.value},null,8,["options","series"]),e("div",$e,[e("div",_e,[p[5]||(p[5]=e("span",{class:"summary-label"},"Avg Monthly Income",-1)),e("span",Ce,o(k(x.value)),1)]),e("div",Pe,[p[6]||(p[6]=e("span",{class:"summary-label"},"Avg Monthly Net",-1)),e("span",{class:P(["summary-value",n.value>=0?"value-positive":"value-negative"])},o(k(n.value)),3)])])],64)):(l(),d("div",Ie,[e("table",Ae,[p[7]||(p[7]=e("thead",null,[e("tr",null,[e("th",{class:"col-period"},"Period"),e("th",{class:"col-value text-right"},"Income"),e("th",{class:"col-value text-right"},"Expenses"),e("th",{class:"col-value text-right"},"Net Cashflow")])],-1)),e("tbody",null,[(l(!0),d(R,null,E(_.value,(y,a)=>(l(),d(R,{key:a},[e("tr",{class:P(["year-row",{expanded:h.value.has(a)}]),onClick:A=>v(a)},[e("td",Fe,[e("button",Se,[(l(),d("svg",Re,[h.value.has(a)?(l(),d("polyline",Ve)):(l(),d("polyline",Le))]))]),e("span",Ee,"FY "+o(a),1)]),e("td",Te,o(k(y.totalIncome)),1),e("td",Me,o(k(y.totalExpenses)),1),e("td",{class:P(["col-value text-right",y.totalNet>=0?"value-positive":"value-negative"])},o(k(y.totalNet)),3)],10,De),h.value.has(a)?(l(!0),d(R,{key:0},E(y.months,A=>(l(),d("tr",{key:A.month.toISOString(),class:"month-row"},[e("td",Ne,o(D(A.month)),1),e("td",Ue,o(k(A.projectedIncome)),1),e("td",Be,o(k(A.projectedExpenses)),1),e("td",{class:P(["col-value text-right",A.netCashflow>=0?"value-positive":"value-negative"])},o(k(A.netCashflow)),3)]))),128)):C("",!0)],64))),128))])])]))])}}},Oe=B(Ye,[["__scopeId","data-v-d25aa897"]]),qe={class:"property-header"},ze={class:"property-body"},Ge={class:"property-address"},He={class:"property-value"},je={class:"property-footer"},We={class:"footer-item"},Je={__name:"PropertyCard",props:{property:{type:Object,required:!0}},emits:["click"],setup(w){const m=w,u=I(()=>({"type-office":m.property.buildingType==="Office","type-retail":m.property.buildingType==="Retail","type-industrial":m.property.buildingType==="Industrial","type-mixed":m.property.buildingType==="Mixed"})),h=I(()=>{const i=m.property.netYieldPercent;return i>=6?"yield-good":i>=4?"yield-medium":"yield-low"}),_=I(()=>{if(!m.property.nextLeaseExpiry)return"";const i=n(new Date,new Date(m.property.nextLeaseExpiry));return i<=6?"expiry-urgent":i<=12?"expiry-warning":""});function g(i){return new Intl.NumberFormat("en-AU",{style:"currency",currency:"AUD",minimumFractionDigits:0,maximumFractionDigits:0}).format(i||0)}function x(i){const v=new Date(i),D=n(new Date,v);return D<=0?"Expired":D===1?"Exp. 1mo":D<12?`Exp. ${D}mo`:v.toLocaleDateString("en-AU",{month:"short",year:"2-digit"})}function n(i,v){return(v.getFullYear()-i.getFullYear())*12+(v.getMonth()-i.getMonth())}return(i,v)=>(l(),d("div",{class:"property-card",onClick:v[0]||(v[0]=k=>i.$emit("click"))},[e("div",qe,[e("div",{class:P(["property-type-badge",u.value])},o(w.property.buildingType),3),e("div",{class:P(["property-yield",h.value])},o(w.property.netYieldPercent.toFixed(1))+"% ",3)]),e("div",ze,[e("h4",Ge,o(w.property.address),1),e("div",He,o(g(w.property.currentValue)),1)]),e("div",je,[e("div",We,[v[1]||(v[1]=e("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),e("polyline",{points:"14 2 14 8 20 8"})],-1)),e("span",null,o(w.property.leaseCount)+" "+o(w.property.leaseCount===1?"lease":"leases"),1)]),w.property.nextLeaseExpiry?(l(),d("div",{key:0,class:P(["footer-item",_.value])},[v[2]||(v[2]=e("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("circle",{cx:"12",cy:"12",r:"10"}),e("polyline",{points:"12 6 12 12 16 14"})],-1)),e("span",null,o(x(w.property.nextLeaseExpiry)),1)],2)):C("",!0)]),v[3]||(v[3]=e("div",{class:"property-arrow"},[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("polyline",{points:"9 18 15 12 9 6"})])],-1))]))}},Ke=B(Je,[["__scopeId","data-v-69f5f21a"]]),Ze={class:"drawer animate-slide-in"},Qe={class:"drawer-header"},Xe={class:"header-content"},et={class:"drawer-title"},tt={key:0,class:"type-badge"},at={key:0,class:"drawer-loading"},st={class:"tabs"},ot=["onClick"],nt={class:"drawer-content"},lt={key:0,class:"tab-content"},rt={class:"overview-grid"},it={class:"overview-card"},dt={class:"overview-value value-large"},ut={class:"overview-card"},vt={class:"overview-value"},ct={class:"overview-card"},pt={class:"overview-card"},mt={class:"overview-value"},yt={class:"overview-card full-width"},gt={class:"overview-value"},ft={key:0,class:"overview-card full-width"},bt={class:"overview-value text-muted"},ht={class:"section"},wt={class:"section-header"},xt={class:"form-row"},kt=["disabled"],$t={class:"valuations-list"},_t={class:"valuation-date"},Ct={class:"valuation-value"},Pt={class:"valuation-source badge"},It={key:0,class:"empty-state-small"},At={key:1,class:"tab-content"},Dt={key:2,class:"tab-content"},Ft={class:"section-header"},St={class:"form-group"},Rt={class:"form-row-2"},Vt={class:"form-group"},Lt={class:"form-group"},Et={class:"form-row-2"},Tt={class:"form-group"},Mt={class:"form-group"},Nt={class:"form-row-2"},Ut={class:"form-group"},Bt={class:"form-group"},Yt=["disabled"],Ot={class:"leases-list"},qt={class:"lease-header"},zt={class:"lease-tenant"},Gt={class:"lease-details"},Ht={class:"lease-detail"},jt={class:"lease-detail"},Wt={class:"lease-detail"},Jt={key:0,class:"empty-state-small"},Kt={key:3,class:"tab-content"},Zt={class:"section-header"},Qt={class:"form-row-ledger"},Xt={class:"checkbox-label"},ea=["disabled"],ta={class:"ledger-list"},aa={class:"ledger-date"},sa={class:"ledger-type"},oa={key:0,class:"empty-state-small"},na={__name:"PropertyDetailDrawer",props:{propertyId:{type:String,required:!0}},emits:["close","updated"],setup(w,{emit:m}){const u=w,h=m,_=b(!0),g=b(null),x=b([]),n=b([]),i=b([]),v=b("overview"),k=[{id:"overview",label:"Overview"},{id:"risk",label:"Risk Analysis"},{id:"leases",label:"Leases"},{id:"ledger",label:"Ledger"}],D=b(!1),r=b(!1),p=b(!1),S=b(!1),y=b(!1),a=b(!1),A=b({date:new Date().toISOString().split("T")[0],value:0,source:""}),c=b({tenantName:"",leaseStart:"",leaseEnd:"",currentRent:0,reviewType:"",optionPeriod:"",unitReference:""}),V=b({date:new Date().toISOString().split("T")[0],type:"",amount:0,isIncome:!1}),Y=I(()=>x.value.length>0?x.value[0].value:g.value?.purchasePrice||0),j=I(()=>Y.value-(g.value?.purchasePrice||0)),J=I(()=>{if(!g.value)return{};g.value;const f=n.value.filter(t=>t.isActive).reduce((t,s)=>t+(s.currentRent||0),0);return{propertyValue:Y.value,currentValue:Y.value,askingPrice:Y.value,estimatedGrossRent:f,annualRent:f,outgoingsEstimate:0,vacancyRatePercent:5,capitalGrowthPercent:3,loanAmount:0,interestRatePercent:6.5,holdingPeriodYears:10,discountRate:8}});ee(()=>u.propertyId,f=>{f&&q()},{immediate:!0});async function q(){try{_.value=!0;const f=await N.get(`/commercialproperty/${u.propertyId}`);g.value=f.data,x.value=f.data.valuations||[],n.value=f.data.leases||[],i.value=f.data.ledgerEntries||[]}catch(f){console.error("Failed to load property:",f)}finally{_.value=!1}}async function K(){try{S.value=!0,await N.post(`/commercialproperty/${u.propertyId}/valuations`,A.value),await q(),D.value=!1,A.value={date:new Date().toISOString().split("T")[0],value:0,source:""},h("updated")}catch(f){console.error("Failed to add valuation:",f)}finally{S.value=!1}}async function Z(){try{y.value=!0,await N.post(`/commercialproperty/${u.propertyId}/leases`,c.value),await q(),r.value=!1,c.value={tenantName:"",leaseStart:"",leaseEnd:"",currentRent:0,reviewType:"",optionPeriod:"",unitReference:""},h("updated")}catch(f){console.error("Failed to add lease:",f)}finally{y.value=!1}}async function Q(){try{a.value=!0,await N.post(`/commercialproperty/${u.propertyId}/ledger`,V.value),await q(),p.value=!1,V.value={date:new Date().toISOString().split("T")[0],type:"",amount:0,isIncome:!1},h("updated")}catch(f){console.error("Failed to add ledger entry:",f)}finally{a.value=!1}}function T(f){return new Intl.NumberFormat("en-AU",{style:"currency",currency:"AUD",minimumFractionDigits:0,maximumFractionDigits:0}).format(f||0)}function z(f){return new Date(f).toLocaleDateString("en-AU",{day:"numeric",month:"short",year:"numeric"})}function X(f){return f.replace(/_/g," ").replace(/([A-Z])/g," $1").trim()}return(f,t)=>(l(),d("div",{class:"drawer-backdrop",onClick:t[18]||(t[18]=M(s=>f.$emit("close"),["self"]))},[e("aside",Ze,[e("div",Qe,[e("div",Xe,[e("h2",et,o(g.value?.address||"Loading..."),1),g.value?(l(),d("span",tt,o(g.value.buildingType),1)):C("",!0)]),e("button",{class:"btn-close",onClick:t[0]||(t[0]=s=>f.$emit("close"))},[...t[19]||(t[19]=[e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)])])]),_.value?(l(),d("div",at,[...t[20]||(t[20]=[e("div",{class:"spinner"},null,-1),e("span",null,"Loading property details...",-1)])])):g.value?(l(),d(R,{key:1},[e("div",st,[(l(),d(R,null,E(k,s=>e("button",{key:s.id,class:P(["tab",{active:v.value===s.id}]),onClick:Wa=>v.value=s.id},o(s.label),11,ot)),64))]),e("div",nt,[v.value==="overview"?(l(),d("div",lt,[e("div",rt,[e("div",it,[t[21]||(t[21]=e("span",{class:"overview-label"},"Current Value",-1)),e("span",dt,o(T(Y.value)),1)]),e("div",ut,[t[22]||(t[22]=e("span",{class:"overview-label"},"Purchase Price",-1)),e("span",vt,o(T(g.value.purchasePrice)),1)]),e("div",ct,[t[23]||(t[23]=e("span",{class:"overview-label"},"Capital Growth",-1)),e("span",{class:P(["overview-value",j.value>=0?"value-positive":"value-negative"])},o(j.value>=0?"+":"")+o(T(j.value)),3)]),e("div",pt,[t[24]||(t[24]=e("span",{class:"overview-label"},"Total GFA",-1)),e("span",mt,o(g.value.totalGFA?.toLocaleString()||"—")+" m²",1)]),e("div",yt,[t[25]||(t[25]=e("span",{class:"overview-label"},"Title Reference",-1)),e("span",gt,o(g.value.titleReference||"—"),1)]),g.value.description?(l(),d("div",ft,[t[26]||(t[26]=e("span",{class:"overview-label"},"Description",-1)),e("span",bt,o(g.value.description),1)])):C("",!0)]),e("div",ht,[e("div",wt,[t[27]||(t[27]=e("h3",null,"Valuation History",-1)),e("button",{class:"btn btn-secondary btn-sm",onClick:t[1]||(t[1]=s=>D.value=!D.value)},o(D.value?"Cancel":"+ Add Valuation"),1)]),D.value?(l(),d("form",{key:0,class:"inline-form",onSubmit:M(K,["prevent"])},[e("div",xt,[$(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>A.value.date=s),type:"date",required:""},null,512),[[F,A.value.date]]),$(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>A.value.value=s),type:"number",placeholder:"Value",required:""},null,512),[[F,A.value.value,void 0,{number:!0}]]),$(e("select",{"onUpdate:modelValue":t[4]||(t[4]=s=>A.value.source=s),required:""},[...t[28]||(t[28]=[e("option",{value:""},"Source",-1),e("option",{value:"Agent"},"Agent",-1),e("option",{value:"External"},"External",-1),e("option",{value:"Internal"},"Internal",-1)])],512),[[G,A.value.source]]),e("button",{type:"submit",class:"btn btn-primary btn-sm",disabled:S.value},"Add",8,kt)])],32)):C("",!0),e("div",$t,[(l(!0),d(R,null,E(x.value,s=>(l(),d("div",{key:s.id,class:"valuation-item"},[e("div",_t,o(z(s.date)),1),e("div",Ct,o(T(s.value)),1),e("div",Pt,o(s.source),1)]))),128)),x.value.length===0?(l(),d("div",It," No valuations recorded ")):C("",!0)])])])):C("",!0),v.value==="risk"?(l(),d("div",At,[t[29]||(t[29]=e("div",{class:"risk-intro"},[e("p",null,"Run a Monte Carlo simulation on this property to understand its risk profile over time.")],-1)),L(ne,{"initial-data":J.value,"auto-run":!1},null,8,["initial-data"])])):C("",!0),v.value==="leases"?(l(),d("div",Dt,[e("div",Ft,[t[30]||(t[30]=e("h3",null,"Lease Profiles",-1)),e("button",{class:"btn btn-secondary btn-sm",onClick:t[5]||(t[5]=s=>r.value=!r.value)},o(r.value?"Cancel":"+ Add Lease"),1)]),r.value?(l(),d("form",{key:0,class:"lease-form",onSubmit:M(Z,["prevent"])},[e("div",St,[t[31]||(t[31]=e("label",null,"Tenant Name *",-1)),$(e("input",{"onUpdate:modelValue":t[6]||(t[6]=s=>c.value.tenantName=s),type:"text",required:""},null,512),[[F,c.value.tenantName]])]),e("div",Rt,[e("div",Vt,[t[32]||(t[32]=e("label",null,"Lease Start *",-1)),$(e("input",{"onUpdate:modelValue":t[7]||(t[7]=s=>c.value.leaseStart=s),type:"date",required:""},null,512),[[F,c.value.leaseStart]])]),e("div",Lt,[t[33]||(t[33]=e("label",null,"Lease End *",-1)),$(e("input",{"onUpdate:modelValue":t[8]||(t[8]=s=>c.value.leaseEnd=s),type:"date",required:""},null,512),[[F,c.value.leaseEnd]])])]),e("div",Et,[e("div",Tt,[t[34]||(t[34]=e("label",null,"Current Rent (p.a.) *",-1)),$(e("input",{"onUpdate:modelValue":t[9]||(t[9]=s=>c.value.currentRent=s),type:"number",required:""},null,512),[[F,c.value.currentRent,void 0,{number:!0}]])]),e("div",Mt,[t[36]||(t[36]=e("label",null,"Review Type *",-1)),$(e("select",{"onUpdate:modelValue":t[10]||(t[10]=s=>c.value.reviewType=s),required:""},[...t[35]||(t[35]=[e("option",{value:""},"Select",-1),e("option",{value:"Fixed"},"Fixed",-1),e("option",{value:"CPI"},"CPI",-1),e("option",{value:"Market"},"Market",-1)])],512),[[G,c.value.reviewType]])])]),e("div",Nt,[e("div",Ut,[t[37]||(t[37]=e("label",null,"Option Period",-1)),$(e("input",{"onUpdate:modelValue":t[11]||(t[11]=s=>c.value.optionPeriod=s),type:"text",placeholder:"e.g., 5+5"},null,512),[[F,c.value.optionPeriod]])]),e("div",Bt,[t[38]||(t[38]=e("label",null,"Unit Reference",-1)),$(e("input",{"onUpdate:modelValue":t[12]||(t[12]=s=>c.value.unitReference=s),type:"text",placeholder:"e.g., Ground Floor"},null,512),[[F,c.value.unitReference]])])]),e("button",{type:"submit",class:"btn btn-primary",disabled:y.value},o(y.value?"Adding...":"Add Lease"),9,Yt)],32)):C("",!0),e("div",Ot,[(l(!0),d(R,null,E(n.value,s=>(l(),d("div",{key:s.id,class:P(["lease-item",{inactive:!s.isActive}])},[e("div",qt,[e("span",zt,o(s.tenantName),1),e("span",{class:P(["lease-status",{active:s.isActive}])},o(s.isActive?"Active":"Inactive"),3)]),e("div",Gt,[e("div",Ht,[t[39]||(t[39]=e("span",{class:"detail-label"},"Term",-1)),e("span",null,o(z(s.leaseStart))+" — "+o(z(s.leaseEnd)),1)]),e("div",jt,[t[40]||(t[40]=e("span",{class:"detail-label"},"Rent",-1)),e("span",null,o(T(s.currentRent))+" p.a.",1)]),e("div",Wt,[t[41]||(t[41]=e("span",{class:"detail-label"},"Review",-1)),e("span",null,o(s.reviewType)+" "+o(s.reviewPercentage?`(${s.reviewPercentage}%)`:""),1)])])],2))),128)),n.value.length===0?(l(),d("div",Jt," No leases recorded ")):C("",!0)])])):C("",!0),v.value==="ledger"?(l(),d("div",Kt,[e("div",Zt,[t[42]||(t[42]=e("h3",null,"Transaction Ledger",-1)),e("button",{class:"btn btn-secondary btn-sm",onClick:t[13]||(t[13]=s=>p.value=!p.value)},o(p.value?"Cancel":"+ Add Entry"),1)]),p.value?(l(),d("form",{key:0,class:"inline-form",onSubmit:M(Q,["prevent"])},[e("div",Qt,[$(e("input",{"onUpdate:modelValue":t[14]||(t[14]=s=>V.value.date=s),type:"date",required:""},null,512),[[F,V.value.date]]),$(e("select",{"onUpdate:modelValue":t[15]||(t[15]=s=>V.value.type=s),required:""},[...t[43]||(t[43]=[U('<option value="" data-v-5c534373>Type</option><option value="Rent_Gross" data-v-5c534373>Rent (Gross)</option><option value="Outgoing_Recoverable" data-v-5c534373>Outgoings Recoverable</option><option value="Council_Rates" data-v-5c534373>Council Rates</option><option value="Water_Rates" data-v-5c534373>Water Rates</option><option value="Insurance" data-v-5c534373>Insurance</option><option value="Management_Fee" data-v-5c534373>Management Fee</option><option value="Repairs_CapEx" data-v-5c534373>Repairs/CapEx</option><option value="Other_Income" data-v-5c534373>Other Income</option><option value="Other_Expense" data-v-5c534373>Other Expense</option>',10)])],512),[[G,V.value.type]]),$(e("input",{"onUpdate:modelValue":t[16]||(t[16]=s=>V.value.amount=s),type:"number",placeholder:"Amount",required:""},null,512),[[F,V.value.amount,void 0,{number:!0}]]),e("label",Xt,[$(e("input",{type:"checkbox","onUpdate:modelValue":t[17]||(t[17]=s=>V.value.isIncome=s)},null,512),[[te,V.value.isIncome]]),t[44]||(t[44]=O(" Income ",-1))]),e("button",{type:"submit",class:"btn btn-primary btn-sm",disabled:a.value},"Add",8,ea)])],32)):C("",!0),e("div",ta,[(l(!0),d(R,null,E(i.value,s=>(l(),d("div",{key:s.id,class:"ledger-item"},[e("div",aa,o(z(s.date)),1),e("div",sa,o(X(s.type)),1),e("div",{class:P(["ledger-amount",s.isIncome?"value-positive":"value-negative"])},o(s.isIncome?"+":"-")+o(T(s.amount)),3)]))),128)),i.value.length===0?(l(),d("div",oa," No ledger entries ")):C("",!0)])])):C("",!0)])],64)):C("",!0)])]))}},la=B(na,[["__scopeId","data-v-5c534373"]]),ra={class:"property-hub animate-fade-in"},ia={key:0,class:"page-loader-container"},da={class:"hub-header"},ua={class:"header-actions"},va={class:"stats-grid"},ca={class:"stat-card stat-primary animate-fade-in-up stagger-1"},pa={class:"stat-content"},ma={class:"stat-value value-large"},ya={class:"stat-card animate-fade-in-up stagger-2"},ga={class:"stat-content"},fa={class:"stat-detail text-muted"},ba={class:"stat-card animate-fade-in-up stagger-3"},ha={class:"stat-content"},wa={class:"stat-value"},xa={class:"stat-card animate-fade-in-up stagger-4"},ka={class:"stat-content"},$a={class:"stat-value"},_a={class:"stat-detail text-muted"},Ca={class:"bento-grid"},Pa={class:"bento-card bento-yield card animate-fade-in-up stagger-1"},Ia={class:"bento-card bento-properties card animate-fade-in-up stagger-2"},Aa={class:"card-header"},Da={key:0,class:"empty-state"},Fa={class:"bento-card bento-vacancy card animate-fade-in-up stagger-3"},Sa={class:"card-header"},Ra={key:0,class:"badge badge-warning"},Va={class:"bento-card bento-cashflow card animate-fade-in-up stagger-4"},La={class:"modal property-modal"},Ea={class:"modal-header"},Ta={class:"form-group"},Ma={class:"form-row"},Na={class:"form-group"},Ua={class:"form-group"},Ba={class:"form-row"},Ya={class:"form-group"},Oa={class:"form-group"},qa={class:"form-group"},za={class:"form-group"},Ga={class:"modal-actions"},Ha=["disabled"],ja={__name:"PropertyHubView",setup(w){const m=b(!0),u=b({totalValue:0,totalPurchasePrice:0,netYieldPercent:0,grossRentalIncome:0,totalExpenses:0,netIncome:0,totalProperties:0,activeLeases:0,expiringLeases:0,properties:[],vacancyHeatmap:[],cashflowForecast:[]}),h=b(null),_=b(!1),g=b(!1),x=b("cards"),n=b({address:"",buildingType:"",totalGFA:0,purchasePrice:0,purchaseDate:new Date().toISOString().split("T")[0],titleReference:"",description:""}),i=I(()=>u.value.totalValue-u.value.totalPurchasePrice),v=I(()=>{const y=u.value.netYieldPercent;return y>=6?"value-positive":y>=4?"value-warning":"value-negative"});function k(y){return new Intl.NumberFormat("en-AU",{style:"currency",currency:"AUD",minimumFractionDigits:0,maximumFractionDigits:0}).format(y||0)}function D(){x.value=x.value==="cards"?"list":"cards"}function r(y){h.value=y}async function p(){try{m.value=!0;const y=await N.get("/commercialproperty/dashboard");u.value=y.data}catch(y){console.error("Failed to load property dashboard:",y)}finally{m.value=!1}}async function S(){try{g.value=!0,await N.post("/commercialproperty",n.value),_.value=!1,n.value={address:"",buildingType:"",totalGFA:0,purchasePrice:0,purchaseDate:new Date().toISOString().split("T")[0],titleReference:"",description:""},await p()}catch(y){console.error("Failed to create property:",y),alert("Failed to create property. Please try again.")}finally{g.value=!1}}return ae(p),(y,a)=>{const A=H("router-link");return l(),d("div",ra,[m.value?(l(),d("div",ia,[L(oe,{size:"lg",text:"Loading Property Portfolio..."})])):(l(),d(R,{key:1},[e("section",da,[a[15]||(a[15]=e("div",{class:"header-content"},[e("h1",{class:"hub-title"},"Property Portfolio"),e("p",{class:"hub-subtitle"},"Commercial real estate holdings overview")],-1)),e("div",ua,[L(A,{to:"/acquisitions",class:"btn btn-secondary"},{default:se(()=>[...a[13]||(a[13]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("circle",{cx:"11",cy:"11",r:"8"}),e("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})],-1),O(" Acquisitions ",-1)])]),_:1}),e("button",{class:"btn btn-primary",onClick:a[0]||(a[0]=c=>_.value=!0)},[...a[14]||(a[14]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),e("line",{x1:"5",y1:"12",x2:"19",y2:"12"})],-1),O(" Add Property ",-1)])])])]),e("section",va,[e("div",ca,[a[17]||(a[17]=e("div",{class:"stat-icon"},[e("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),e("polyline",{points:"9 22 9 12 15 12 15 22"})])],-1)),e("div",pa,[a[16]||(a[16]=e("span",{class:"stat-label"},"Total Portfolio Value",-1)),e("span",ma,o(k(u.value.totalValue)),1),e("span",{class:P(["stat-detail",{"value-positive":i.value>=0,"value-negative":i.value<0}])},o(i.value>=0?"+":"")+o(k(i.value))+" from purchase ",3)])]),e("div",ya,[a[19]||(a[19]=e("div",{class:"stat-icon stat-icon-yield"},[e("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("circle",{cx:"12",cy:"12",r:"10"}),e("polyline",{points:"12 6 12 12 16 14"})])],-1)),e("div",ga,[a[18]||(a[18]=e("span",{class:"stat-label"},"Net Yield",-1)),e("span",{class:P(["stat-value",v.value])},o(u.value.netYieldPercent.toFixed(2))+"%",3),e("span",fa,o(k(u.value.netIncome))+" p.a.",1)])]),e("div",ba,[a[21]||(a[21]=U('<div class="stat-icon stat-icon-leases" data-v-075b5c15><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-075b5c15><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" data-v-075b5c15></path><polyline points="14 2 14 8 20 8" data-v-075b5c15></polyline><line x1="16" y1="13" x2="8" y2="13" data-v-075b5c15></line><line x1="16" y1="17" x2="8" y2="17" data-v-075b5c15></line></svg></div>',1)),e("div",ha,[a[20]||(a[20]=e("span",{class:"stat-label"},"Active Leases",-1)),e("span",wa,o(u.value.activeLeases),1),e("span",{class:P(["stat-detail",{"value-warning":u.value.expiringLeases>0}])},o(u.value.expiringLeases)+" expiring in 12mo ",3)])]),e("div",xa,[a[23]||(a[23]=U('<div class="stat-icon stat-icon-properties" data-v-075b5c15><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-075b5c15><rect x="3" y="3" width="18" height="18" rx="2" ry="2" data-v-075b5c15></rect><line x1="3" y1="9" x2="21" y2="9" data-v-075b5c15></line><line x1="9" y1="21" x2="9" y2="9" data-v-075b5c15></line></svg></div>',1)),e("div",ka,[a[22]||(a[22]=e("span",{class:"stat-label"},"Properties",-1)),e("span",$a,o(u.value.totalProperties),1),e("span",_a,o(k(u.value.grossRentalIncome))+" gross income ",1)])])]),e("section",Ca,[e("div",Pa,[a[24]||(a[24]=e("div",{class:"card-header"},[e("h3",null,"Net Yield Performance"),e("span",{class:"badge badge-info"},"Last 12 Months")],-1)),L(ye,{"yield-percent":u.value.netYieldPercent,"target-yield":6,"gross-income":u.value.grossRentalIncome,expenses:u.value.totalExpenses},null,8,["yield-percent","gross-income","expenses"])]),e("div",Ia,[e("div",Aa,[a[25]||(a[25]=e("h3",null,"Holdings",-1)),e("button",{class:"btn btn-ghost btn-sm",onClick:D},o(x.value==="cards"?"List":"Cards"),1)]),e("div",{class:P(["properties-container",x.value])},[(l(!0),d(R,null,E(u.value.properties,c=>(l(),W(Ke,{key:c.id,property:c,onClick:V=>r(c)},null,8,["property","onClick"]))),128)),u.value.properties.length===0?(l(),d("div",Da,[a[26]||(a[26]=e("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5"},[e("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),e("polyline",{points:"9 22 9 12 15 12 15 22"})],-1)),a[27]||(a[27]=e("p",null,"No properties yet",-1)),e("button",{class:"btn btn-secondary btn-sm",onClick:a[1]||(a[1]=c=>_.value=!0)},"Add your first property")])):C("",!0)],2)]),e("div",Fa,[e("div",Sa,[a[28]||(a[28]=e("h3",null,"Lease Expiry Timeline",-1)),u.value.expiringLeases>0?(l(),d("span",Ra,o(u.value.expiringLeases)+" at risk ",1)):C("",!0)]),L(he,{data:u.value.vacancyHeatmap},null,8,["data"])]),e("div",Va,[a[29]||(a[29]=e("div",{class:"card-header"},[e("h3",null,"12-Month Cashflow Forecast")],-1)),L(Oe,{data:u.value.cashflowForecast},null,8,["data"])])])],64)),h.value?(l(),W(la,{key:2,"property-id":h.value.id,onClose:a[2]||(a[2]=c=>h.value=null),onUpdated:p},null,8,["property-id"])):C("",!0),_.value?(l(),d("div",{key:3,class:"modal-backdrop",onClick:a[12]||(a[12]=M(c=>_.value=!1,["self"]))},[e("div",La,[e("div",Ea,[a[30]||(a[30]=e("h2",null,"Add Commercial Property",-1)),e("button",{class:"btn-close",onClick:a[3]||(a[3]=c=>_.value=!1)},"×")]),e("form",{onSubmit:M(S,["prevent"]),class:"modal-body"},[e("div",Ta,[a[31]||(a[31]=e("label",null,"Address *",-1)),$(e("input",{"onUpdate:modelValue":a[4]||(a[4]=c=>n.value.address=c),type:"text",required:"",placeholder:"123 Main Street, Sydney NSW 2000"},null,512),[[F,n.value.address]])]),e("div",Ma,[e("div",Na,[a[33]||(a[33]=e("label",null,"Building Type *",-1)),$(e("select",{"onUpdate:modelValue":a[5]||(a[5]=c=>n.value.buildingType=c),required:""},[...a[32]||(a[32]=[U('<option value="" data-v-075b5c15>Select type</option><option value="Office" data-v-075b5c15>Office</option><option value="Retail" data-v-075b5c15>Retail</option><option value="Industrial" data-v-075b5c15>Industrial</option><option value="Mixed" data-v-075b5c15>Mixed Use</option>',5)])],512),[[G,n.value.buildingType]])]),e("div",Ua,[a[34]||(a[34]=e("label",null,"Total GFA (m²)",-1)),$(e("input",{"onUpdate:modelValue":a[6]||(a[6]=c=>n.value.totalGFA=c),type:"number",min:"0",step:"0.01",placeholder:"1000"},null,512),[[F,n.value.totalGFA,void 0,{number:!0}]])])]),e("div",Ba,[e("div",Ya,[a[35]||(a[35]=e("label",null,"Purchase Price *",-1)),$(e("input",{"onUpdate:modelValue":a[7]||(a[7]=c=>n.value.purchasePrice=c),type:"number",min:"0",step:"0.01",required:"",placeholder:"1500000"},null,512),[[F,n.value.purchasePrice,void 0,{number:!0}]])]),e("div",Oa,[a[36]||(a[36]=e("label",null,"Purchase Date *",-1)),$(e("input",{"onUpdate:modelValue":a[8]||(a[8]=c=>n.value.purchaseDate=c),type:"date",required:""},null,512),[[F,n.value.purchaseDate]])])]),e("div",qa,[a[37]||(a[37]=e("label",null,"Title Reference",-1)),$(e("input",{"onUpdate:modelValue":a[9]||(a[9]=c=>n.value.titleReference=c),type:"text",placeholder:"Lot 1 DP 123456"},null,512),[[F,n.value.titleReference]])]),e("div",za,[a[38]||(a[38]=e("label",null,"Description",-1)),$(e("textarea",{"onUpdate:modelValue":a[10]||(a[10]=c=>n.value.description=c),rows:"2",placeholder:"Additional notes about the property"},null,512),[[F,n.value.description]])]),e("div",Ga,[e("button",{type:"button",class:"btn btn-secondary",onClick:a[11]||(a[11]=c=>_.value=!1)},"Cancel"),e("button",{type:"submit",class:"btn btn-primary",disabled:g.value},o(g.value?"Creating...":"Create Property"),9,Ha)])],32)])])):C("",!0)])}}},Qa=B(ja,[["__scopeId","data-v-075b5c15"]]);export{Qa as default};
