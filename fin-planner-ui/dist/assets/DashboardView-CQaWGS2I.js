import{x as A,r as C,o as a,c as n,a as t,d as c,j as v,e as _,F as V,l as j,t as i,k,B as G,g as y,z as r,_ as N,u as z,p as F,C as L,i as M,f as x,n as I}from"./index-oVbs5Hxd.js";import{usePortfolioStore as T}from"./portfolio-CjZnfIUI.js";import{_ as U}from"./MoneyBoxLoader-BOnNyVJS.js";import{_ as O}from"./PerformanceChart-DQJ6edwA.js";import{g as R}from"./goalService-CY3iimJz.js";import{f as b,a as S}from"./formatters-DwG4QyEz.js";const W={class:"goal-widget card"},H={class:"widget-header"},X={key:0,class:"loading-state"},E={key:1,class:"empty-state"},Q={key:2,class:"goals-list"},Y={class:"goal-info"},q={class:"goal-name"},J={class:"goal-amount"},K={class:"goal-date"},Z={class:"progress-bar-container"},tt={__name:"GoalProgressWidget",setup(P){const m=y([]),d=y(!0),p=r(()=>m.value.filter(s=>!s.isCompleted).sort((s,o)=>new Date(s.targetDate)-new Date(o.targetDate)).slice(0,3)),g=s=>{if(s.targetAmount<=0)return 0;const o=s.currentAmount/s.targetAmount*100;return Math.min(o,100)};return A(async()=>{try{const s=await R.getGoals();m.value=s.data}catch(s){console.error(s)}finally{d.value=!1}}),(s,o)=>{const h=C("router-link");return a(),n("div",W,[t("div",H,[o[1]||(o[1]=t("h3",null,"Financial Goals",-1)),c(h,{to:"/goals",class:"btn-text"},{default:v(()=>[...o[0]||(o[0]=[_("View All",-1)])]),_:1})]),d.value?(a(),n("div",X,[...o[2]||(o[2]=[t("span",{class:"spinner"},null,-1),_(" Loading goals... ",-1)])])):m.value.length===0?(a(),n("div",E,[o[4]||(o[4]=t("p",null,"No active goals.",-1)),c(h,{to:"/goals",class:"btn btn-sm btn-primary"},{default:v(()=>[...o[3]||(o[3]=[_("Set a Goal",-1)])]),_:1})])):(a(),n("div",Q,[(a(!0),n(V,null,j(p.value,l=>(a(),n("div",{key:l.id,class:"goal-item"},[t("div",Y,[t("span",q,i(l.name),1),t("span",J,i(k(b)(l.currentAmount))+" / "+i(k(b)(l.targetAmount)),1),t("span",K,i(k(S)(l.targetDate)),1)]),t("div",Z,[t("div",{class:"progress-bar",style:G({width:g(l)+"%"})},null,4)])]))),128))]))])}}},et={class:"dashboard animate-fade-in"},ot={key:0,class:"page-loader-container"},st={key:1,class:"welcome-section"},at={class:"welcome-content"},nt={class:"welcome-title"},it={class:"welcome-subtitle"},lt={key:2,class:"performance-section animate-fade-in-up"},rt={class:"section-header-row"},ct={class:"benchmark-selector"},dt={key:1,class:"empty-state-card card"},ut={key:3,class:"stats-grid"},pt={class:"stat-card card animate-fade-in-up stagger-1"},vt={class:"stat-value"},mt={class:"stat-card card animate-fade-in-up stagger-3"},gt={class:"stat-value"},ht={class:"card animate-fade-in-up stagger-4",style:{padding:"0",overflow:"hidden"}},ft={key:4,class:"actions-section"},wt={class:"actions-grid"},_t={__name:"DashboardView",setup(P){const m=z(),d=T(),p=r(()=>d.loading),g=y(""),D=r(()=>{const w=m.user?.email||"User";return w.includes("@")?w.split("@")[0].split(".").map(u=>u.charAt(0).toUpperCase()+u.slice(1)).join(" "):w}),s=r(()=>S(new Date,"long")),o=r(()=>d.currentPortfolio),h=r(()=>o.value?.totalValue||0),l=r(()=>o.value?.id||null),B=r(()=>o.value?.holdingCount||0),f=y(2.34);return A(async()=>{d.portfolios.length===0&&await d.fetchPortfolios()}),(w,e)=>{const u=C("router-link");return a(),n("div",et,[p.value?(a(),n("div",ot,[c(U,{size:"lg",text:"Loading Financial Overview..."})])):(a(),n("section",st,[t("div",at,[t("h1",nt,"Welcome back, "+i(D.value),1),t("p",it,"Your portfolio overview for "+i(s.value),1)]),c(u,{to:"/portfolios",class:"btn btn-primary"},{default:v(()=>[...e[1]||(e[1]=[_(" View Portfolios ",-1)])]),_:1})])),p.value?x("",!0):(a(),n("section",lt,[t("div",rt,[e[4]||(e[4]=t("h2",{class:"section-title"},"Performance",-1)),t("div",ct,[e[3]||(e[3]=t("label",{for:"benchmark"},"Benchmark:",-1)),F(t("select",{id:"benchmark","onUpdate:modelValue":e[0]||(e[0]=$=>g.value=$)},[...e[2]||(e[2]=[t("option",{value:""},"None",-1),t("option",{value:"ASX200"},"ASX 200",-1),t("option",{value:"S&P500"},"S&P 500",-1),t("option",{value:"ALLORDS"},"All Ordinaries",-1)])],512),[[L,g.value]])])]),l.value?(a(),M(O,{key:0,"portfolio-id":l.value,benchmark:g.value},null,8,["portfolio-id","benchmark"])):(a(),n("div",dt,[...e[5]||(e[5]=[t("p",null,"Select a portfolio to view performance",-1)])]))])),p.value?x("",!0):(a(),n("section",ut,[t("div",pt,[e[6]||(e[6]=t("div",{class:"stat-header"},[t("span",{class:"stat-label"},"Total Net Worth")],-1)),t("div",vt,i(k(b)(h.value)),1),t("div",{class:I(["stat-change",{"value-positive":f.value>=0,"value-negative":f.value<0}])},i(f.value>=0?"+":"")+i(f.value.toFixed(2))+"% this month ",3)]),t("div",mt,[e[7]||(e[7]=t("div",{class:"stat-header"},[t("span",{class:"stat-label"},"Assets Tracked")],-1)),t("div",gt,i(B.value),1),e[8]||(e[8]=t("div",{class:"stat-detail text-muted"},"Across all accounts",-1))]),t("div",ht,[c(tt)])])),p.value?x("",!0):(a(),n("section",ft,[e[12]||(e[12]=t("h2",{class:"section-title"},"Quick Actions",-1)),t("div",wt,[c(u,{to:"/import",class:"action-card card"},{default:v(()=>[...e[9]||(e[9]=[t("div",{class:"action-icon"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},[t("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),t("polyline",{points:"17 8 12 3 7 8"}),t("line",{x1:"12",y1:"3",x2:"12",y2:"15"})])],-1),t("div",{class:"action-content"},[t("h3",null,"Import Data"),t("p",null,"Upload portfolio valuations")],-1),t("svg",{class:"action-arrow",xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[t("polyline",{points:"9 18 15 12 9 6"})],-1)])]),_:1}),c(u,{to:"/decisions",class:"action-card card"},{default:v(()=>[...e[10]||(e[10]=[t("div",{class:"action-icon"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},[t("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),t("polyline",{points:"14 2 14 8 20 8"}),t("line",{x1:"9",y1:"15",x2:"15",y2:"15"})])],-1),t("div",{class:"action-content"},[t("h3",null,"Review Decisions"),t("p",null,"AI recommendations")],-1),t("svg",{class:"action-arrow",xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[t("polyline",{points:"9 18 15 12 9 6"})],-1)])]),_:1}),c(u,{to:"/reports",class:"action-card card"},{default:v(()=>[...e[11]||(e[11]=[t("div",{class:"action-icon"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},[t("line",{x1:"18",y1:"20",x2:"18",y2:"10"}),t("line",{x1:"12",y1:"20",x2:"12",y2:"4"}),t("line",{x1:"6",y1:"20",x2:"6",y2:"14"})])],-1),t("div",{class:"action-content"},[t("h3",null,"Generate Reports"),t("p",null,"Tax summaries & performance")],-1),t("svg",{class:"action-arrow",xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[t("polyline",{points:"9 18 15 12 9 6"})],-1)])]),_:1})])]))])}}},St=N(_t,[["__scopeId","data-v-1dadf1a0"]]);export{St as default};
