import{_ as F,c as r,o as i,b as B,r as n,H as D,k as w,i as E,a as t,g as h,x as c,t as l,z as u,d as C,e as G,n as _,v as W,f as q,F as K,q as Y,D as J,B as I}from"./index-D2Wtd9Sa.js";import{u as Q}from"./portfolio-2Pzgj-Z4.js";const X={},Z={class:"money-flow card p-6"};function tt(z,v){return i(),r("div",Z,[...v[0]||(v[0]=[B('<h3 class="font-bold mb-6 flex items-center gap-2" data-v-68fa0602><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-68fa0602><path d="M22 12h-4l-3 9L9 3l-3 9H2" data-v-68fa0602></path></svg> Annual Cashflow (Sankey) </h3><div class="sankey-container" data-v-68fa0602><svg width="100%" height="300" viewBox="0 0 600 300" data-v-68fa0602><g class="nodes" data-v-68fa0602><rect x="50" y="50" width="100" height="40" rx="4" fill="var(--color-success)" opacity="0.8" data-v-68fa0602></rect><text x="100" y="75" text-anchor="middle" fill="white" font-size="12" font-weight="bold" data-v-68fa0602>Salary</text><rect x="50" y="110" width="100" height="40" rx="4" fill="var(--color-success)" opacity="0.6" data-v-68fa0602></rect><text x="100" y="135" text-anchor="middle" fill="white" font-size="12" font-weight="bold" data-v-68fa0602>Dividends</text><rect x="50" y="170" width="100" height="40" rx="4" fill="var(--color-success)" opacity="0.4" data-v-68fa0602></rect><text x="100" y="195" text-anchor="middle" fill="white" font-size="12" font-weight="bold" data-v-68fa0602>Rental</text></g><rect x="250" y="100" width="100" height="100" rx="8" fill="var(--color-accent)" opacity="0.2" stroke="var(--color-accent)" stroke-width="2" data-v-68fa0602></rect><text x="300" y="150" text-anchor="middle" fill="var(--color-text-primary)" font-size="14" font-weight="bold" data-v-68fa0602>Total Income</text><g class="nodes" data-v-68fa0602><rect x="450" y="50" width="100" height="40" rx="4" fill="var(--color-danger)" opacity="0.8" data-v-68fa0602></rect><text x="500" y="75" text-anchor="middle" fill="white" font-size="12" font-weight="bold" data-v-68fa0602>Expenses</text><rect x="450" y="110" width="100" height="40" rx="4" fill="var(--color-danger)" opacity="0.6" data-v-68fa0602></rect><text x="500" y="135" text-anchor="middle" fill="white" font-size="12" font-weight="bold" data-v-68fa0602>Tax</text><rect x="450" y="170" width="100" height="40" rx="4" fill="var(--color-accent)" opacity="0.8" data-v-68fa0602></rect><text x="500" y="195" text-anchor="middle" fill="white" font-size="12" font-weight="bold" data-v-68fa0602>Invested</text></g><path d="M 150 70 C 200 70, 200 120, 250 120" stroke="var(--color-success)" stroke-width="15" fill="none" opacity="0.2" data-v-68fa0602></path><path d="M 150 130 C 200 130, 200 150, 250 150" stroke="var(--color-success)" stroke-width="10" fill="none" opacity="0.2" data-v-68fa0602></path><path d="M 150 190 C 200 190, 200 180, 250 180" stroke="var(--color-success)" stroke-width="8" fill="none" opacity="0.2" data-v-68fa0602></path><path d="M 350 120 C 400 120, 400 70, 450 70" stroke="var(--color-danger)" stroke-width="15" fill="none" opacity="0.2" data-v-68fa0602></path><path d="M 350 150 C 400 150, 400 130, 450 130" stroke="var(--color-danger)" stroke-width="12" fill="none" opacity="0.2" data-v-68fa0602></path><path d="M 350 180 C 400 180, 400 190, 450 190" stroke="var(--color-accent)" stroke-width="10" fill="none" opacity="0.2" data-v-68fa0602></path></svg></div><div class="mt-6 p-4 bg-muted rounded-lg text-xs text-muted flex items-center gap-2" data-v-68fa0602><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-68fa0602><circle cx="12" cy="12" r="10" data-v-68fa0602></circle><line x1="12" y1="16" x2="12" y2="12" data-v-68fa0602></line><line x1="12" y1="8" x2="12.01" y2="8" data-v-68fa0602></line></svg> This diagram visualizes how your total annual income is distributed between consumption, taxation, and wealth creation. </div>',3)])])}const et=F(X,[["render",tt],["__scopeId","data-v-68fa0602"]]),at={class:"fi-view"},st={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},ot={class:"card p-6"},nt={class:"space-y-6"},lt={class:"form-group"},it={class:"label flex justify-between"},rt={class:"text-accent font-bold"},dt={class:"form-group"},ct={class:"label flex justify-between"},ut={class:"text-accent font-bold"},vt={class:"form-group"},pt={class:"label flex justify-between"},ft={class:"text-accent font-bold"},xt={class:"form-group"},mt={class:"label flex justify-between"},ht={class:"text-accent font-bold"},gt={class:"form-group"},bt={class:"form-group"},yt=["disabled"],wt={key:0},_t={key:1},kt={class:"lg:col-span-2 space-y-6"},Ct={class:"flex gap-2"},It={key:0,class:"space-y-6"},Bt={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Pt={class:"card p-6 flex flex-col items-center justify-center text-center"},At={class:"relative w-48 h-48 mb-4"},$t={viewBox:"0 0 100 100",class:"w-full h-full transform -rotate-90"},Mt=["stroke","stroke-dashoffset"],Rt={class:"absolute inset-0 flex flex-col items-center justify-center"},St={class:"text-4xl font-bold"},jt={class:"card p-6 grid grid-cols-1 gap-4"},Vt={class:"p-4 bg-elevated rounded-lg"},Tt={class:"text-2xl font-bold text-accent"},Ft={class:"grid grid-cols-2 gap-4"},zt={class:"p-4 bg-elevated rounded-lg"},Ot={class:"text-xl font-bold text-danger"},Ut={class:"p-4 bg-elevated rounded-lg"},Ht={class:"text-xl font-bold text-success"},Lt={class:"grid grid-cols-2 gap-4 border-t border-border pt-4 mt-2"},Nt={class:"flex flex-col"},Dt={class:"text-sm font-bold"},Et={class:"flex flex-col"},Gt={class:"text-sm font-bold"},Wt={class:"card p-6"},qt={class:"h-80"},Kt={key:1,class:"h-full flex items-center justify-center text-muted italic"},Yt={key:1,class:"card h-[600px] flex flex-col overflow-hidden"},Jt={class:"text-sm whitespace-pre-wrap"},Qt={key:0,class:"flex justify-start"},Xt={class:"p-4 border-t border-border bg-muted flex gap-2"},Zt=["disabled"],te=["disabled"],T=5e3,ee={__name:"FinancialIndependenceView",setup(z){const v=Q(),g=n(!1),p=n("simulator"),m=n(""),f=n(!1),b=n([{role:"ai",text:"Hello! I am your AI Financial Advisor. How can I help you with your retirement planning today?"}]),y=n(null),a=D({retirementAge:65,targetIncome:8e4,initialBalance:5e5,annualContribution:3e4,expectedReturn:7,volatility:15,inflationRate:2.5,years:40,includeAgePension:!0}),x=n(0),P=n(0),A=n(0),$=n(0),M=n([]),O=w(()=>x.value>.8?"#10b981":x.value>.6?"#f59e0b":"#ef4444"),d=o=>o==null?"0":o.toLocaleString(void 0,{maximumFractionDigits:0}),R=w(()=>a.targetIncome*25),U=w(()=>{const o=a.retirementAge-45;return o<=0?a.initialBalance:R.value/Math.pow(1+a.expectedReturn/100,o)}),H=async()=>{g.value=!0;try{const e=(await I.post("/Retirement/simulate",{},{params:{scenarioId:"00000000-0000-0000-0000-000000000000"}}).catch(()=>I.post("/StressTest/simulate",{iterations:T,years:a.years,initialBalance:a.initialBalance,annualContribution:a.annualContribution,expectedReturn:a.expectedReturn/100,volatility:a.volatility/100,inflationRate:a.inflationRate/100,targetIncome:a.targetIncome,retirementYear:a.retirementAge-45,includeAgePension:a.includeAgePension},{params:{portfolioId:v.currentPortfolio?.id}}))).data;x.value=e.successProbability,P.value=e.medianOutcome,A.value=e.worstCaseOutcome,$.value=e.bestCaseOutcome,V.value=[{name:"Median",data:e.medianPath},{name:"P10 (Worst)",data:e.p10Path},{name:"P90 (Best)",data:e.p90Path}],M.value=e.medianPath}catch(o){console.error("Simulation failed",o)}finally{g.value=!1}},S=async()=>{if(!m.value.trim()||f.value)return;const o=m.value;m.value="",b.value.push({role:"user",text:o}),f.value=!0,j();try{const e=`
      User is targetting retirement at age ${a.retirementAge}.
      Target annual income: $${a.targetIncome}.
      Current initial balance: $${a.initialBalance}.
      Annual contribution: $${a.annualContribution}.
      Expected market return: ${a.expectedReturn}%.
      Current Success Probability: ${(x.value*100).toFixed(0)}%.
    `,k=await I.post("/AI/chat",{message:o,context:e});b.value.push({role:"ai",text:k.data.response})}catch{b.value.push({role:"ai",text:"Sorry, I encountered an error processing your request."})}finally{f.value=!1,j()}},j=()=>{setTimeout(()=>{y.value&&(y.value.scrollTop=y.value.scrollHeight)},100)},V=n([]),L=w(()=>({chart:{type:"line",toolbar:{show:!1},animations:{enabled:!0},background:"transparent"},stroke:{curve:"smooth",width:[3,2,2],dashArray:[0,4,4]},colors:["#3b82f6","#ef4444","#10b981"],xaxis:{title:{text:"Years"},labels:{style:{colors:"var(--color-text-muted)"}}},yaxis:{labels:{formatter:o=>"$"+(o/1e3).toFixed(0)+"k",style:{colors:"var(--color-text-muted)"}}},grid:{borderColor:"var(--color-border-subtle)",xaxis:{lines:{show:!1}}},legend:{show:!1},tooltip:{theme:"dark",y:{formatter:o=>"$"+o.toLocaleString()}}}));return E(()=>{v.currentPortfolio&&(a.initialBalance=v.currentPortfolioValue||5e5)}),(o,e)=>{const k=q("apexchart");return i(),r("div",at,[t("div",st,[t("div",ot,[e[16]||(e[16]=t("h2",{class:"text-xl font-bold mb-6 flex items-center gap-2"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[t("path",{d:"M12 20h9"}),t("path",{d:"M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"})]),h(" Retirement Params ")],-1)),t("div",nt,[t("div",lt,[t("label",it,[e[9]||(e[9]=h(" Retirement Age ",-1)),t("span",rt,l(a.retirementAge),1)]),c(t("input",{type:"range","onUpdate:modelValue":e[0]||(e[0]=s=>a.retirementAge=s),min:"30",max:"80",class:"slider"},null,512),[[u,a.retirementAge,void 0,{number:!0}]])]),t("div",dt,[t("label",ct,[e[10]||(e[10]=h(" Target Annual Income ",-1)),t("span",ut,"$"+l(d(a.targetIncome)),1)]),c(t("input",{type:"range","onUpdate:modelValue":e[1]||(e[1]=s=>a.targetIncome=s),min:"20000",max:"300000",step:"5000",class:"slider"},null,512),[[u,a.targetIncome,void 0,{number:!0}]])]),t("div",vt,[t("label",pt,[e[11]||(e[11]=h(" Initial Balance ",-1)),t("span",ft,"$"+l(d(a.initialBalance)),1)]),c(t("input",{type:"number","onUpdate:modelValue":e[2]||(e[2]=s=>a.initialBalance=s),class:"input"},null,512),[[u,a.initialBalance,void 0,{number:!0}]])]),t("div",xt,[t("label",mt,[e[12]||(e[12]=h(" Annual Contribution ",-1)),t("span",ht,"$"+l(d(a.annualContribution)),1)]),c(t("input",{type:"number","onUpdate:modelValue":e[3]||(e[3]=s=>a.annualContribution=s),class:"input"},null,512),[[u,a.annualContribution,void 0,{number:!0}]])]),e[15]||(e[15]=t("div",{class:"divider"},null,-1)),t("div",gt,[e[13]||(e[13]=t("label",{class:"label"},"Expected Return (%)",-1)),c(t("input",{type:"number","onUpdate:modelValue":e[4]||(e[4]=s=>a.expectedReturn=s),step:"0.1",class:"input"},null,512),[[u,a.expectedReturn,void 0,{number:!0}]])]),t("div",bt,[e[14]||(e[14]=t("label",{class:"label"},"Volatility (%)",-1)),c(t("input",{type:"number","onUpdate:modelValue":e[5]||(e[5]=s=>a.volatility=s),step:"0.1",class:"input"},null,512),[[u,a.volatility,void 0,{number:!0}]])]),t("button",{onClick:H,class:"btn btn-primary w-full py-3 mt-4",disabled:g.value},[g.value?(i(),r("span",wt,"Simulating...")):(i(),r("span",_t,"Run Simulation"))],8,yt)])]),t("div",kt,[t("div",Ct,[t("button",{onClick:e[6]||(e[6]=s=>p.value="simulator"),class:_(["px-6 py-2 rounded-lg font-bold transition-all",p.value==="simulator"?"bg-accent text-white shadow-accent":"bg-elevated text-muted hover:text-primary"])}," Simulator ",2),t("button",{onClick:e[7]||(e[7]=s=>p.value="advisor"),class:_(["px-6 py-2 rounded-lg font-bold transition-all",p.value==="advisor"?"bg-accent text-white shadow-accent":"bg-elevated text-muted hover:text-primary"])}," AI Advisor ",2)]),p.value==="simulator"?(i(),r("div",It,[t("div",Bt,[t("div",Pt,[e[19]||(e[19]=t("h3",{class:"text-sm font-medium text-muted mb-4 uppercase tracking-wider"},"Success Probability",-1)),t("div",At,[(i(),r("svg",$t,[e[17]||(e[17]=t("circle",{cx:"50",cy:"50",r:"45",fill:"none",stroke:"var(--color-bg-elevated)","stroke-width":"8"},null,-1)),t("circle",{cx:"50",cy:"50",r:"45",fill:"none",stroke:O.value,"stroke-width":"8","stroke-dasharray":"283","stroke-dashoffset":283-283*x.value,"stroke-linecap":"round",class:"transition-all duration-1000 ease-out"},null,8,Mt)])),t("div",Rt,[t("span",St,l((x.value*100).toFixed(0))+"%",1),e[18]||(e[18]=t("span",{class:"text-xs text-muted uppercase"},"Success Rate",-1))])]),t("p",{class:"text-sm text-muted max-w-xs"}," Based on "+l(T)+" simulations of market volatility. ")]),t("div",jt,[t("div",Vt,[e[20]||(e[20]=t("span",{class:"text-xs text-muted uppercase"},"Median Final Outcome",-1)),t("div",Tt,"$"+l(d(P.value/1e6))+"M",1)]),t("div",Ft,[t("div",zt,[e[21]||(e[21]=t("span",{class:"text-xs text-muted uppercase"},"P10 (Worst)",-1)),t("div",Ot,"$"+l(d(A.value/1e6))+"M",1)]),t("div",Ut,[e[22]||(e[22]=t("span",{class:"text-xs text-muted uppercase"},"P90 (Best)",-1)),t("div",Ht,"$"+l(d($.value/1e6))+"M",1)])]),t("div",Lt,[t("div",Nt,[e[23]||(e[23]=t("span",{class:"text-[10px] text-muted uppercase"},"Coast FI Target",-1)),t("div",Dt,"$"+l(d(U.value)),1)]),t("div",Et,[e[24]||(e[24]=t("span",{class:"text-[10px] text-muted uppercase"},"FI Number",-1)),t("div",Gt,"$"+l(d(R.value)),1)])])])]),t("div",Wt,[e[25]||(e[25]=B('<div class="flex justify-between items-center mb-6" data-v-31150699><h3 class="text-lg font-bold" data-v-31150699>Wealth Projection</h3><div class="flex gap-4 text-xs" data-v-31150699><span class="flex items-center gap-1" data-v-31150699><span class="w-3 h-3 bg-accent rounded-full" data-v-31150699></span> Median</span><span class="flex items-center gap-1" data-v-31150699><span class="w-3 h-3 bg-danger opacity-50 rounded-full" data-v-31150699></span> P10</span><span class="flex items-center gap-1" data-v-31150699><span class="w-3 h-3 bg-success opacity-50 rounded-full" data-v-31150699></span> P90</span></div></div>',1)),t("div",qt,[M.value.length?(i(),W(k,{key:0,type:"line",height:"100%",options:L.value,series:V.value},null,8,["options","series"])):(i(),r("div",Kt," Run simulation to see results "))])])])):C("",!0),G(et,{class:"mt-6"}),p.value==="advisor"?(i(),r("div",Yt,[e[28]||(e[28]=B('<div class="p-4 border-b border-border bg-muted flex items-center gap-3" data-v-31150699><div class="w-10 h-10 bg-accent rounded-full flex items-center justify-center text-white" data-v-31150699><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-31150699><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z" data-v-31150699></path></svg></div><div data-v-31150699><div class="font-bold" data-v-31150699>Gemini Advisor</div><div class="text-xs text-muted" data-v-31150699>Powered by Google Gemini</div></div></div>',1)),t("div",{class:"flex-1 overflow-y-auto p-6 space-y-4",ref_key:"chatContainer",ref:y},[(i(!0),r(K,null,Y(b.value,(s,N)=>(i(),r("div",{key:N,class:_(["flex",s.role==="user"?"justify-end":"justify-start"])},[t("div",{class:_(["max-w-[80%] p-4 rounded-2xl",s.role==="user"?"bg-accent text-white rounded-tr-none":"bg-elevated text-primary rounded-tl-none"])},[t("div",Jt,l(s.text),1)],2)],2))),128)),f.value?(i(),r("div",Qt,[...e[26]||(e[26]=[t("div",{class:"bg-elevated p-4 rounded-2xl rounded-tl-none flex gap-1"},[t("span",{class:"w-2 h-2 bg-muted rounded-full animate-bounce"}),t("span",{class:"w-2 h-2 bg-muted rounded-full animate-bounce delay-100"}),t("span",{class:"w-2 h-2 bg-muted rounded-full animate-bounce delay-200"})],-1)])])):C("",!0)],512),t("div",Xt,[c(t("input",{type:"text","onUpdate:modelValue":e[8]||(e[8]=s=>m.value=s),onKeyup:J(S,["enter"]),placeholder:"Ask about your retirement strategy...",class:"flex-1 input",disabled:f.value},null,40,Zt),[[u,m.value]]),t("button",{onClick:S,class:"btn btn-primary px-6",disabled:f.value},[...e[27]||(e[27]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[t("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),t("polyline",{points:"22 2 15 22 11 13 2 9 22 2"})],-1)])],8,te)])])):C("",!0)])])])}}},oe=F(ee,[["__scopeId","data-v-31150699"]]);export{oe as default};
