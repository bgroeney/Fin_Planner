import{_ as D,r as h,k as i,i as P,c as n,o as a,a as t,e as d,w as m,g as y,f as S,F as N,q as j,t as l,p as x,s as M,u as L,d as b,v as F,x as I,y as z,n as T}from"./index-D2Wtd9Sa.js";import{u as U}from"./portfolio-2Pzgj-Z4.js";import{M as W}from"./MoneyBoxLoader-CzLxqCX3.js";import{P as O}from"./PerformanceChart-BJtlk3wS.js";import{g as R}from"./goalService-Cye8izVx.js";import{f as A,a as B}from"./formatters-DwG4QyEz.js";const H={class:"goal-widget card"},X={class:"widget-header"},q={key:0,class:"loading-state"},E={key:1,class:"empty-state"},Q={key:2,class:"goals-list"},Y={class:"goal-info"},J={class:"goal-name"},K={class:"goal-amount"},Z={class:"goal-date"},tt={class:"progress-bar-container"},st={__name:"GoalProgressWidget",setup(V){const g=h([]),u=h(!0),p=i(()=>g.value.filter(o=>!o.isCompleted).sort((o,e)=>new Date(o.targetDate)-new Date(e.targetDate)).slice(0,3)),f=o=>{if(o.targetAmount<=0)return 0;const e=o.currentAmount/o.targetAmount*100;return Math.min(e,100)};return P(async()=>{try{const o=await R.getGoals();g.value=o.data}catch(o){console.error(o)}finally{u.value=!1}}),(o,e)=>{const _=S("router-link");return a(),n("div",H,[t("div",X,[e[1]||(e[1]=t("h3",null,"Financial Goals",-1)),d(_,{to:"/goals",class:"btn-text"},{default:m(()=>[...e[0]||(e[0]=[y("View All",-1)])]),_:1})]),u.value?(a(),n("div",q,[...e[2]||(e[2]=[t("span",{class:"spinner"},null,-1),y(" Loading goals... ",-1)])])):g.value.length===0?(a(),n("div",E,[e[4]||(e[4]=t("p",null,"No active goals.",-1)),d(_,{to:"/goals",class:"btn btn-sm btn-primary"},{default:m(()=>[...e[3]||(e[3]=[y("Set a Goal",-1)])]),_:1})])):(a(),n("div",Q,[(a(!0),n(N,null,j(p.value,r=>(a(),n("div",{key:r.id,class:"goal-item"},[t("div",Y,[t("span",J,l(r.name),1),t("span",K,l(x(A)(r.currentAmount))+" / "+l(x(A)(r.targetAmount)),1),t("span",Z,l(x(B)(r.targetDate)),1)]),t("div",tt,[t("div",{class:"progress-bar",style:M({width:f(r)+"%"})},null,4)])]))),128))]))])}}},et=D(st,[["__scopeId","data-v-36a7cf2e"]]),ot={class:"dashboard animate-fade-in"},at={key:0,class:"page-loader-container"},nt={key:1,class:"welcome-section"},lt={class:"welcome-content"},it={class:"welcome-title"},rt={class:"welcome-subtitle"},ct={key:2,class:"performance-section animate-fade-in-up"},dt={class:"section-header-row"},ut={class:"benchmark-selector"},vt={key:1,class:"empty-state-card card"},pt={key:3,class:"stats-grid"},mt={class:"stat-card card animate-fade-in-up stagger-1"},gt={class:"stat-value"},ft={class:"stat-card card animate-fade-in-up stagger-2"},ht={class:"stat-value"},wt={class:"stat-card card animate-fade-in-up stagger-3"},_t={class:"stat-value"},kt={class:"card animate-fade-in-up stagger-4",style:{padding:"0",overflow:"hidden"}},yt={key:4,class:"actions-section"},xt={class:"actions-grid"},bt={__name:"DashboardView",setup(V){const g=L(),u=U(),p=i(()=>u.loading),f=i(()=>u.portfolios),w=h(""),o=i(()=>{const c=g.user?.email||"User";return c.includes("@")?c.split("@")[0].split(".").map(v=>v.charAt(0).toUpperCase()+v.slice(1)).join(" "):c}),e=i(()=>B(new Date,"long")),_=i(()=>f.value.reduce((c,s)=>c+(s.totalValue||0),0)),r=i(()=>f.value.length),C=i(()=>u.currentPortfolio?.id||null),$=i(()=>f.value.reduce((c,s)=>c+(s.holdingCount||0),0));h(0);const k=h(2.34);return P(async()=>{await u.fetchPortfolios()}),(c,s)=>{const v=S("router-link");return a(),n("div",ot,[p.value?(a(),n("div",at,[d(W,{size:"lg",text:"Loading Financial Overview..."})])):(a(),n("section",nt,[t("div",lt,[t("h1",it,"Welcome back, "+l(o.value),1),t("p",rt,"Your portfolio overview for "+l(e.value),1)]),d(v,{to:"/portfolios",class:"btn btn-primary"},{default:m(()=>[...s[1]||(s[1]=[y(" View Portfolios ",-1)])]),_:1})])),p.value?b("",!0):(a(),n("section",ct,[t("div",dt,[s[4]||(s[4]=t("h2",{class:"section-title"},"Performance",-1)),t("div",ut,[s[3]||(s[3]=t("label",{for:"benchmark"},"Benchmark:",-1)),I(t("select",{id:"benchmark","onUpdate:modelValue":s[0]||(s[0]=G=>w.value=G)},[...s[2]||(s[2]=[t("option",{value:""},"None",-1),t("option",{value:"ASX200"},"ASX 200",-1),t("option",{value:"S&P500"},"S&P 500",-1),t("option",{value:"ALLORDS"},"All Ordinaries",-1)])],512),[[z,w.value]])])]),C.value?(a(),F(O,{key:0,"portfolio-id":C.value,benchmark:w.value},null,8,["portfolio-id","benchmark"])):(a(),n("div",vt,[...s[5]||(s[5]=[t("p",null,"Select a portfolio to view performance",-1)])]))])),p.value?b("",!0):(a(),n("section",pt,[t("div",mt,[s[6]||(s[6]=t("div",{class:"stat-header"},[t("span",{class:"stat-label"},"Total Net Worth")],-1)),t("div",gt,l(x(A)(_.value)),1),t("div",{class:T(["stat-change",{"value-positive":k.value>=0,"value-negative":k.value<0}])},l(k.value>=0?"+":"")+l(k.value.toFixed(2))+"% this month ",3)]),t("div",ft,[s[7]||(s[7]=t("div",{class:"stat-header"},[t("span",{class:"stat-label"},"Portfolios")],-1)),t("div",ht,l(r.value),1),s[8]||(s[8]=t("div",{class:"stat-detail text-muted"},"Active strategies",-1))]),t("div",wt,[s[9]||(s[9]=t("div",{class:"stat-header"},[t("span",{class:"stat-label"},"Assets Tracked")],-1)),t("div",_t,l($.value),1),s[10]||(s[10]=t("div",{class:"stat-detail text-muted"},"Across all accounts",-1))]),t("div",kt,[d(et)])])),p.value?b("",!0):(a(),n("section",yt,[s[14]||(s[14]=t("h2",{class:"section-title"},"Quick Actions",-1)),t("div",xt,[d(v,{to:"/import",class:"action-card card"},{default:m(()=>[...s[11]||(s[11]=[t("div",{class:"action-icon"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},[t("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),t("polyline",{points:"17 8 12 3 7 8"}),t("line",{x1:"12",y1:"3",x2:"12",y2:"15"})])],-1),t("div",{class:"action-content"},[t("h3",null,"Import Data"),t("p",null,"Upload portfolio valuations")],-1),t("svg",{class:"action-arrow",xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[t("polyline",{points:"9 18 15 12 9 6"})],-1)])]),_:1}),d(v,{to:"/decisions",class:"action-card card"},{default:m(()=>[...s[12]||(s[12]=[t("div",{class:"action-icon"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},[t("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),t("polyline",{points:"14 2 14 8 20 8"}),t("line",{x1:"9",y1:"15",x2:"15",y2:"15"})])],-1),t("div",{class:"action-content"},[t("h3",null,"Review Decisions"),t("p",null,"AI recommendations")],-1),t("svg",{class:"action-arrow",xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[t("polyline",{points:"9 18 15 12 9 6"})],-1)])]),_:1}),d(v,{to:"/reports",class:"action-card card"},{default:m(()=>[...s[13]||(s[13]=[t("div",{class:"action-icon"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},[t("line",{x1:"18",y1:"20",x2:"18",y2:"10"}),t("line",{x1:"12",y1:"20",x2:"12",y2:"4"}),t("line",{x1:"6",y1:"20",x2:"6",y2:"14"})])],-1),t("div",{class:"action-content"},[t("h3",null,"Generate Reports"),t("p",null,"Tax summaries & performance")],-1),t("svg",{class:"action-arrow",xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[t("polyline",{points:"9 18 15 12 9 6"})],-1)])]),_:1})])]))])}}},$t=D(bt,[["__scopeId","data-v-1cdfe00c"]]);export{$t as default};
