import{_ as S,r as i,i as N,c as l,o as n,a as e,d as C,g as T,b as x,F as U,q as B,m as A,t as r,x as u,z as p,A as E,p as h,s as q,n as z}from"./index-D2Wtd9Sa.js";import{g as m}from"./goalService-Cye8izVx.js";import{f as D,a as I}from"./formatters-DwG4QyEz.js";const P={class:"goals-view animate-fade-in"},Y={key:0,class:"loader-container"},$={key:1,class:"empty-state"},j={key:2,class:"goals-grid"},H={class:"goal-card-header"},L={class:"goal-actions"},O=["onClick"],J=["onClick"],K={class:"goal-progress-section"},Q={class:"progress-labels"},R={class:"current"},W={class:"target"},X={class:"progress-bar-bg"},Z={class:"progress-meta"},ee={class:"percentage"},te={class:"target-date"},ae={class:"goal-status"},se={class:"modal-card"},oe={class:"form-group"},le={class:"form-row"},ne={class:"form-group"},re={class:"form-group"},ie={class:"form-group"},de={key:0,class:"form-group checkbox-group"},ue={class:"modal-actions"},ce=["disabled"],ve={__name:"GoalsView",setup(pe){const g=i([]),b=i(!0),c=i(!1),d=i(!1),v=i(!1),y=i(null),o=i({name:"",targetAmount:0,currentAmount:0,targetDate:"",isCompleted:!1}),k=s=>{if(s.targetAmount<=0)return 0;const t=s.currentAmount/s.targetAmount*100;return Math.min(t,100)},f=async()=>{b.value=!0;try{const s=await m.getGoals();g.value=s.data}catch(s){console.error(s)}finally{b.value=!1}},_=()=>{d.value=!1,y.value=null,o.value={name:"",targetAmount:1e4,currentAmount:0,targetDate:new Date(new Date().setFullYear(new Date().getFullYear()+1)).toISOString().split("T")[0],isCompleted:!1},c.value=!0},G=s=>{d.value=!0,y.value=s.id,o.value={name:s.name,targetAmount:s.targetAmount,currentAmount:s.currentAmount,targetDate:s.targetDate.split("T")[0],isCompleted:s.isCompleted},c.value=!0},w=()=>{c.value=!1},M=async()=>{if(!o.value.targetDate){alert("Please select a target date");return}const s=new Date(o.value.targetDate).getFullYear();if(s<2e3||s>2100){alert("Please enter a valid year between 2000 and 2100");return}v.value=!0;try{d.value?await m.updateGoal(y.value,o.value):await m.createGoal(o.value),await f(),w()}catch(t){console.error("Failed to save goal:",t);const a=t.response?.data?.message||t.response?.data||t.message||"Unknown error";alert(`Failed to save goal: ${a}`)}finally{v.value=!1}},V=async s=>{if(confirm(`Are you sure you want to delete "${s.name}"?`))try{await m.deleteGoal(s.id),await f()}catch(t){console.error(t),alert("Failed to delete goal")}};return N(f),(s,t)=>(n(),l("div",P,[e("div",{class:"header-row"},[t[6]||(t[6]=e("div",{class:"header-content"},[e("h1",null,"Financial Goals"),e("p",{class:"subtitle"},"Track your progress towards financial independence")],-1)),e("button",{class:"btn btn-primary",onClick:_},[...t[5]||(t[5]=[e("span",{class:"icon"},"+",-1),T(" Set New Goal ",-1)])])]),b.value?(n(),l("div",Y,[...t[7]||(t[7]=[e("div",{class:"spinner"},null,-1)])])):g.value.length===0?(n(),l("div",$,[t[8]||(t[8]=x('<div class="empty-icon" data-v-99bc2d23><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" data-v-99bc2d23><circle cx="12" cy="12" r="10" data-v-99bc2d23></circle><circle cx="12" cy="12" r="6" data-v-99bc2d23></circle><circle cx="12" cy="12" r="2" data-v-99bc2d23></circle></svg></div><h2 data-v-99bc2d23>No goals set yet</h2><p data-v-99bc2d23>Start tracking your savings targets, big purchases, or debt repayments.</p>',3)),e("button",{class:"btn btn-primary",onClick:_},"Create Your First Goal")])):(n(),l("div",j,[(n(!0),l(U,null,B(g.value,a=>(n(),l("div",{key:a.id,class:"goal-card card"},[e("div",H,[e("h3",null,r(a.name),1),e("div",L,[e("button",{class:"btn-icon",onClick:F=>G(a),title:"Edit"},[...t[9]||(t[9]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),e("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1)])],8,O),e("button",{class:"btn-icon danger",onClick:F=>V(a),title:"Delete"},[...t[10]||(t[10]=[x('<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-99bc2d23><polyline points="3 6 5 6 21 6" data-v-99bc2d23></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2" data-v-99bc2d23></path><line x1="10" y1="11" x2="10" y2="17" data-v-99bc2d23></line><line x1="14" y1="11" x2="14" y2="17" data-v-99bc2d23></line></svg>',1)])],8,J)])]),e("div",K,[e("div",Q,[e("span",R,r(h(D)(a.currentAmount)),1),e("span",W,"of "+r(h(D)(a.targetAmount)),1)]),e("div",X,[e("div",{class:"progress-bar-fill",style:q({width:k(a)+"%"})},null,4)]),e("div",Z,[e("span",ee,r(k(a).toFixed(1))+"% Complete",1),e("span",te,"Target: "+r(h(I)(a.targetDate)),1)])]),e("div",ae,[e("span",{class:z(["status-badge",{completed:a.isCompleted}])},r(a.isCompleted?"Completed":"In Progress"),3)])]))),128))])),c.value?(n(),l("div",{key:3,class:"modal-overlay",onClick:A(w,["self"])},[e("div",se,[e("h2",null,r(d.value?"Edit Goal":"Set New Goal"),1),e("form",{onSubmit:A(M,["prevent"])},[e("div",oe,[t[11]||(t[11]=e("label",null,"Goal Name",-1)),u(e("input",{"onUpdate:modelValue":t[0]||(t[0]=a=>o.value.name=a),type:"text",placeholder:"e.g. House Deposit",required:""},null,512),[[p,o.value.name]])]),e("div",le,[e("div",ne,[t[12]||(t[12]=e("label",null,"Target Amount",-1)),u(e("input",{"onUpdate:modelValue":t[1]||(t[1]=a=>o.value.targetAmount=a),type:"number",step:"0.01",required:""},null,512),[[p,o.value.targetAmount,void 0,{number:!0}]])]),e("div",re,[t[13]||(t[13]=e("label",null,"Current Amount saved",-1)),u(e("input",{"onUpdate:modelValue":t[2]||(t[2]=a=>o.value.currentAmount=a),type:"number",step:"0.01"},null,512),[[p,o.value.currentAmount,void 0,{number:!0}]])])]),e("div",ie,[t[14]||(t[14]=e("label",null,"Target Date",-1)),u(e("input",{"onUpdate:modelValue":t[3]||(t[3]=a=>o.value.targetDate=a),type:"date",required:""},null,512),[[p,o.value.targetDate]])]),d.value?(n(),l("div",de,[u(e("input",{type:"checkbox",id:"completed","onUpdate:modelValue":t[4]||(t[4]=a=>o.value.isCompleted=a)},null,512),[[E,o.value.isCompleted]]),t[15]||(t[15]=e("label",{for:"completed"},"Mark as Completed",-1))])):C("",!0),e("div",ue,[e("button",{type:"button",class:"btn btn-secondary",onClick:w},"Cancel"),e("button",{type:"submit",class:"btn btn-primary",disabled:v.value},r(v.value?"Saving...":d.value?"Update Goal":"Create Goal"),9,ce)])],32)])])):C("",!0)]))}},ye=S(ve,[["__scopeId","data-v-99bc2d23"]]);export{ye as default};
